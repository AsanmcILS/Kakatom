<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Astana Guide - –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
        }

        body {
            background: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
        }

        .search-section {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-box input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
        }

        .search-box button {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .search-box button:hover {
            background: #5a67d8;
        }

        .filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 8px 16px;
            background: #f0f0f0;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }

        .filter-btn.active {
            background: #667eea;
            color: white;
        }

        .filter-btn:hover {
            background: #ddd;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .map-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: 500px;
        }

        #map {
            width: 100%;
            height: 100%;
        }

        .places-list {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: 500px;
            overflow-y: auto;
        }

        .places-list h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 18px;
        }

        .place-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: transform 0.2s;
            border-left: 4px solid #667eea;
        }

        .place-card:hover {
            transform: translateX(5px);
            background: #f0f0f0;
        }

        .place-card h3 {
            color: #333;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .place-card .category {
            color: #667eea;
            font-size: 12px;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .place-card .address {
            color: #666;
            font-size: 13px;
            margin-bottom: 5px;
        }

        .place-card .rating {
            color: #fbbf24;
            font-size: 14px;
        }

        .events-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .events-section h2 {
            margin-bottom: 15px;
            color: #333;
            font-size: 18px;
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .event-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
        }

        .event-card h3 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .event-card .date {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .event-card .location {
            font-size: 13px;
            opacity: 0.8;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .error {
            color: #e53e3e;
            text-align: center;
            padding: 20px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
            
            .map-container {
                height: 350px;
            }
            
            .places-list {
                height: 350px;
            }
        }
    </style>
    <!-- 2GIS Map API -->
    <link rel="stylesheet" href="https://mapgl.2gis.com/api/css/2.0/mapgl.css">
    <script src="https://mapgl.2gis.com/api/js/2.0"></script>
</head>
<body>
    <div class="header">
        <h1>üó∫Ô∏è Astana Guide</h1>
        <p>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–∏–¥ –ø–æ –ê—Å—Ç–∞–Ω–µ</p>
    </div>

    <div class="container">
        <div class="search-section">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="–ü–æ–∏—Å–∫ –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤, —Å–æ–±—ã—Ç–∏–π...">
                <button onclick="searchPlaces()">–ù–∞–π—Ç–∏</button>
            </div>
            <div class="filters">
                <button class="filter-btn active" onclick="filterPlaces('all')">–í—Å–µ</button>
                <button class="filter-btn" onclick="filterPlaces('attraction')">üèõÔ∏è –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
                <button class="filter-btn" onclick="filterPlaces('restaurant')">üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω—ã</button>
                <button class="filter-btn" onclick="filterPlaces('cafe')">‚òï –ö–∞—Ñ–µ</button>
                <button class="filter-btn" onclick="filterPlaces('hotel')">üè® –û—Ç–µ–ª–∏</button>
                <button class="filter-btn" onclick="filterPlaces('museum')">üèõÔ∏è –ú—É–∑–µ–∏</button>
                <button class="filter-btn" onclick="filterPlaces('park')">üå≥ –ü–∞—Ä–∫–∏</button>
            </div>
        </div>

        <div class="content">
            <div class="map-container">
                <div id="map"></div>
            </div>
            <div class="places-list" id="placesList">
                <h2>üìç –ú–µ—Å—Ç–∞ —Ä—è–¥–æ–º</h2>
                <div id="placesContainer"></div>
            </div>
        </div>

        <div class="events-section">
            <h2>üìÖ –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h2>
            <div class="events-grid" id="eventsContainer"></div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è API 2GIS
        const API_KEY = 'rujany3791'; // –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á 2GIS –¥–ª—è –¥–µ–º–æ
        const MAP_CONFIG = {
            center: [71.4305, 51.1282], // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –ê—Å—Ç–∞–Ω—ã
            zoom: 12
        };

        let map;
        let markers = [];
        let places = [];
        let currentFilter = 'all';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
        function initMap() {
            map = new mapgl.Map('map', {
                center: MAP_CONFIG.center,
                zoom: MAP_CONFIG.zoom,
                key: API_KEY,
                style: 'default'
            });

            // –î–æ–±–∞–≤–ª—è–µ–º –º–∞—Ä–∫–µ—Ä —Ü–µ–Ω—Ç—Ä–∞ –≥–æ—Ä–æ–¥–∞
            new mapgl.Marker(map, {
                coordinates: MAP_CONFIG.center,
                icon: 'https://docs.2gis.com/img/mapgl/icon.svg',
                size: [30, 30]
            });

            // –ó–∞–≥—Ä—É–∂–∞–µ–º –º–µ—Å—Ç–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
            loadPlaces();
            loadEvents();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Å—Ç —á–µ—Ä–µ–∑ API 2GIS
        async function loadPlaces() {
            showLoading();
            try {
                // –í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API 2GIS
                places = [
                    {
                        id: 1,
                        name: '–ë–∞–π—Ç–µ—Ä–µ–∫',
                        category: 'attraction',
                        address: '–ø—Ä. –ù—É—Ä–∂–æ–ª, 14',
                        coordinates: [71.4305, 51.1282],
                        rating: 4.8,
                        description: '–ì–ª–∞–≤–Ω–∞—è –¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ê—Å—Ç–∞–Ω—ã'
                    },
                    {
                        id: 2,
                        name: '–•–∞–Ω –®–∞—Ç—ã—Ä',
                        category: 'attraction',
                        address: '—É–ª. –¢—É—Ä–∞–Ω, 37',
                        coordinates: [71.4214, 51.1315],
                        rating: 4.7,
                        description: '–ö—Ä—É–ø–Ω–µ–π—à–∏–π —Ç–æ—Ä–≥–æ–≤–æ-—Ä–∞–∑–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–π —Ü–µ–Ω—Ç—Ä'
                    },
                    {
                        id: 3,
                        name: '–†–µ—Å—Ç–æ—Ä–∞–Ω "–ê–ª–∞–Ω"',
                        category: 'restaurant',
                        address: '—É–ª. –î–æ—Å—Ç—ã–∫, 5',
                        coordinates: [71.4256, 51.1258],
                        rating: 4.5,
                        description: '–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫—É—Ö–Ω—è'
                    },
                    {
                        id: 4,
                        name: '–ö–∞—Ñ–µ "Coffee Boom"',
                        category: 'cafe',
                        address: '–ø—Ä. –ê–±–∞—è, 10',
                        coordinates: [71.4289, 51.1223],
                        rating: 4.3,
                        description: '–£—é—Ç–Ω–æ–µ –∫–∞—Ñ–µ —Å –¥–µ—Å–µ—Ä—Ç–∞–º–∏'
                    },
                    {
                        id: 5,
                        name: '–û—Ç–µ–ª—å "Rixos"',
                        category: 'hotel',
                        address: '–ø—Ä. –¢—É—Ä–∞–Ω, 24',
                        coordinates: [71.4225, 51.1342],
                        rating: 4.9,
                        description: '–ü—è—Ç–∏–∑–≤–µ–∑–¥–æ—á–Ω—ã–π –æ—Ç–µ–ª—å'
                    },
                    {
                        id: 6,
                        name: '–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º—É–∑–µ–π',
                        category: 'museum',
                        address: '–ø—Ä. –¢–∞—É–µ–ª—Å–∏–∑–¥–∏–∫, 54',
                        coordinates: [71.4187, 51.1378],
                        rating: 4.6,
                        description: '–ì–ª–∞–≤–Ω—ã–π –º—É–∑–µ–π —Å—Ç—Ä–∞–Ω—ã'
                    },
                    {
                        id: 7,
                        name: '–ü–∞—Ä–∫ –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö',
                        category: 'park',
                        address: '—É–ª. –ö–µ—Ä–µ–π-–ñ–∞–Ω–∏–±–µ–∫, 15',
                        coordinates: [71.4321, 51.1265],
                        rating: 4.4,
                        description: '–ö—Ä–∞—Å–∏–≤—ã–π –ø–∞—Ä–∫ –¥–ª—è –ø—Ä–æ–≥—É–ª–æ–∫'
                    }
                ];
                
                updatePlacesDisplay();
            } catch (error) {
                showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Å—Ç');
                console.error(error);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π
        async function loadEvents() {
            try {
                const events = [
                    {
                        id: 1,
                        title: '–§–µ—Å—Ç–∏–≤–∞–ª—å –Ω–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∫—É—Ö–Ω–∏',
                        date: '20-22 —Ñ–µ–≤—Ä–∞–ª—è 2026',
                        location: '–•–∞–Ω –®–∞—Ç—ã—Ä',
                        description: '–î–µ–≥—É—Å—Ç–∞—Ü–∏—è –±–ª—é–¥ —Ä–∞–∑–Ω—ã—Ö –Ω–∞—Ä–æ–¥–æ–≤'
                    },
                    {
                        id: 2,
                        title: '–ö–æ–Ω—Ü–µ—Ä—Ç "–ù–æ—á—å –≤ –æ–ø–µ—Ä–µ"',
                        date: '25 —Ñ–µ–≤—Ä–∞–ª—è 2026',
                        location: '–¢–µ–∞—Ç—Ä –æ–ø–µ—Ä—ã –∏ –±–∞–ª–µ—Ç–∞',
                        description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –º—É–∑—ã–∫–∞'
                    },
                    {
                        id: 3,
                        title: '–í—ã—Å—Ç–∞–≤–∫–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤',
                        date: '1-15 –º–∞—Ä—Ç–∞ 2026',
                        location: '–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º—É–∑–µ–π',
                        description: '–†–∞–±–æ—Ç—ã –º–æ–ª–æ–¥—ã—Ö —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤'
                    },
                    {
                        id: 4,
                        title: '–≠–∫—Å–∫—É—Ä—Å–∏—è –ø–æ –ê—Å—Ç–∞–Ω–µ',
                        date: '–ö–∞–∂–¥—É—é —Å—É–±–±–æ—Ç—É',
                        location: '–ü–ª–æ—â–∞–¥—å —É –ë–∞–π—Ç–µ—Ä–µ–∫–∞',
                        description: '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–µ—à–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è'
                    }
                ];

                displayEvents(events);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π:', error);
            }
        }

        function displayEvents(events) {
            const container = document.getElementById('eventsContainer');
            container.innerHTML = events.map(event => `
                <div class="event-card">
                    <h3>${event.title}</h3>
                    <div class="date">üìÖ ${event.date}</div>
                    <div class="location">üìç ${event.location}</div>
                    <p style="font-size: 12px; margin-top: 8px; opacity: 0.9;">${event.description}</p>
                </div>
            `).join('');
        }

        function updatePlacesDisplay() {
            displayPlaces();
            updateMarkers();
        }

        function displayPlaces() {
            const container = document.getElementById('placesContainer');
            const filteredPlaces = currentFilter === 'all' 
                ? places 
                : places.filter(place => place.category === currentFilter);

            if (filteredPlaces.length === 0) {
                container.innerHTML = '<div class="loading">–ú–µ—Å—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
                return;
            }

            container.innerHTML = filteredPlaces.map(place => `
                <div class="place-card" onclick="focusOnPlace(${place.id})">
                    <div class="category">${getCategoryName(place.category)}</div>
                    <h3>${place.name}</h3>
                    <div class="address">${place.address}</div>
                    <div class="rating">‚≠ê ${place.rating}</div>
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">${place.description}</p>
                </div>
            `).join('');
        }

        function updateMarkers() {
            // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ä—ã–µ –º–∞—Ä–∫–µ—Ä—ã
            markers.forEach(marker => marker.destroy());
            markers = [];

            const filteredPlaces = currentFilter === 'all' 
                ? places 
                : places.filter(place => place.category === currentFilter);

            // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã
            filteredPlaces.forEach(place => {
                const marker = new mapgl.Marker(map, {
                    coordinates: place.coordinates,
                    icon: getMarkerIcon(place.category),
                    size: [30, 30]
                });

                // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ø–∞–ø –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä
                marker.on('click', () => {
                    showPlaceInfo(place);
                });

                markers.push(marker);
            });
        }

        function getMarkerIcon(category) {
            const icons = {
                attraction: 'https://docs.2gis.com/img/mapgl/icon.svg',
                restaurant: 'https://docs.2gis.com/img/mapgl/icon.svg',
                cafe: 'https://docs.2gis.com/img/mapgl/icon.svg',
                hotel: 'https://docs.2gis.com/img/mapgl/icon.svg',
                museum: 'https://docs.2gis.com/img/mapgl/icon.svg',
                park: 'https://docs.2gis.com/img/mapgl/icon.svg'
            };
            return icons[category] || icons.attraction;
        }

        function getCategoryName(category) {
            const names = {
                attraction: 'üèõÔ∏è –î–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å',
                restaurant: 'üçΩÔ∏è –†–µ—Å—Ç–æ—Ä–∞–Ω',
                cafe: '‚òï –ö–∞—Ñ–µ',
                hotel: 'üè® –û—Ç–µ–ª—å',
                museum: 'üèõÔ∏è –ú—É–∑–µ–π',
                park: 'üå≥ –ü–∞—Ä–∫'
            };
            return names[category] || category;
        }

        function focusOnPlace(placeId) {
            const place = places.find(p => p.id === placeId);
            if (place) {
                map.setCenter(place.coordinates);
                map.setZoom(16);
                showPlaceInfo(place);
            }
        }

        function showPlaceInfo(place) {
            // –í –¥–µ–º–æ-–≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º alert
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—Ä–∞—Å–∏–≤–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
            alert(`${place.name}\n${place.address}\n–†–µ–π—Ç–∏–Ω–≥: ${place.rating}\n${place.description}`);
        }

        function searchPlaces() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (!query) {
                updatePlacesDisplay();
                return;
            }

            const filtered = places.filter(place => 
                place.name.toLowerCase().includes(query) || 
                place.address.toLowerCase().includes(query) ||
                place.description.toLowerCase().includes(query)
            );

            if (filtered.length > 0) {
                places = filtered;
                updatePlacesDisplay();
            } else {
                document.getElementById('placesContainer').innerHTML = 
                    '<div class="loading">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            }
        }

        function filterPlaces(category) {
            currentFilter = category;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updatePlacesDisplay();
        }

        function showLoading() {
            document.getElementById('placesContainer').innerHTML = 
                '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Å—Ç...</div>';
        }

        function showError(message) {
            document.getElementById('placesContainer').innerHTML = 
                `<div class="error">${message}</div>`;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = function() {
            if (typeof mapgl !== 'undefined') {
                initMap();
            } else {
                console.error('2GIS API –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∞—Å—å');
                document.getElementById('map').innerHTML = 
                    '<div class="error">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞—Ä—Ç—ã</div>';
            }
        };
    </script>
</body>
</html>
